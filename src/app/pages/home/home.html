<div class="container py-4">
  <header class="text-center mb-5">
    <h1 class="title">
      <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png" alt="Pokeball" class="pokeball-icon">
      Pokédex
    </h1>
    <p class="subtitle">Descubre 30 Pokémon aleatorios</p>

    <div class="d-flex gap-2 justify-content-center flex-wrap">
      <button class="btn btn-outline-primary btn-reload" (click)="reload()" [disabled]="loading">
        @if (!loading) {
          <span>Generar nuevos Pokémon</span>
        } @else {
          <span>Cargando...</span>
        }
      </button>
      <button class="btn btn-outline-secondary btn-reload" (click)="reloadOptimized()" [disabled]="loading">
        @if (!loading) {
          <span>Carga rápida</span>
        } @else {
          <span>Cargando...</span>
        }
      </button>
    </div>
  </header>

  @if (loading) {
    <div class="text-center py-5">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
      <p class="mt-3 text-muted">Buscando Pokémon...</p>
    </div>
  }

  @if (error) {
    <div class="alert alert-danger text-center">
      {{ error }}
      <button class="btn btn-link" (click)="reload()">Reintentar</button>
    </div>
  }

  @if (!loading && !error) {
    @if (featuredPokemon) {
      <app-featured-pokemon
        [pokemon]="featuredPokemon"
        (viewDetail)="onViewDetail($event)">
      </app-featured-pokemon>
    }

    <h4 class="gallery-title mb-4">Más Pokémon</h4>
    <div class="row g-4">
      @for (pokemon of pokemons; track pokemon.id) {
        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
          <app-pokemon-card
            [pokemon]="pokemon"
            (viewDetail)="onViewDetail($event)">
          </app-pokemon-card>
        </div>
      }
    </div>
  }
</div>

@if (selectedPokemon) {
  <app-pokemon-modal
    [pokemon]="selectedPokemon"
    (close)="closeModal()">
  </app-pokemon-modal>
}
